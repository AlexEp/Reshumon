<div *ngIf="isDataReady; else elseBlock">
 <!-- Tools panel -->
 <div class="card mw-100">
    <div class="card-body row">
  
      <div class="col-2">
        <button id="list " [ngClass]="{ 'btn-warning' : isDataChanged , 'btn-secondary' : !isDataChanged }" class="btn btn-warning "
          [disabled]="!isDataChanged" (click)="onRevert() ">
          <i class="fa fa-undo" aria-hidden="true "></i>{{ translateWorld('revert') | translate}}</button>
      </div>
      <div class="col-2">
        <button id="list " class="btn " [ngClass]="{ 'btn-success' : isDataChanged , 'btn-secondary' : !isDataChanged }" [disabled]="!isDataChanged"
          (click)="onSave() ">
          <i class="fa fa-cloud-upload " aria-hidden="true "></i>{{ translateWorld('save') | translate}}</button>
      </div>
      <div class="col-2">
        <button id="list " class="btn btn-success" (click)="onEditClicked()">
          <i class="fa fa-plus-circle" aria-hidden="true "></i>{{ translateWorld('new') | translate}}</button>
      </div>
      <div class="col-6">
  
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text" id="inputGroupPrepend2"> <i class="fa fa-search" aria-hidden="true"></i></span>
          </div>
          <input type="text" class="form-control" id="search" [(ngModel)]="search" autocomplete="off" >
        </div>
      </div>
  
    </div>
  </div>
  
   <!-- Data Table -->
   <div class="row">
      <div class="card">
        <div class="card-header">
          {{translateWorld('projects managment') | translate}}
        </div>


        <div class="card-body mw-100">
            <p-table [value]="projects | filterProjects:search" [responsive]="true">
                <ng-template pTemplate="header">
                  <tr>
                    <th class="ui-p-2">{{translateWorld('edit') | translate}} </th>
                    <th class="ui-p-3">{{translateWorld('name') | translate}}</th>
                    <th class="ui-p-3">{{translateWorld('category') | translate}}</th>
                    <th class="ui-p-3">{{translateWorld('active') | translate}}</th>
                  </tr>
                </ng-template>
                <ng-template pTemplate="body" let-project>
                  <tr>
                    <td class="ui-p-2">
                      <i id="btn-row-delete" class="btn btn-outline-danger fa fa-trash btn-hover" aria-hidden="true" (click)="onDeleteClicked(project)"></i>
                      <i id="btn-row-edit" class="btn btn-outline-info fa fa-pencil btn-hover" aria-hidden="true" (click)="onEditClicked(project)"></i>
                    </td>
                    <td class="ui-p-3">
                        <input class="form-control is-invalid"   #inputName="ngModel" autocomplete="off"
                        [ngClass]="{'is-invalid': !(inputName.valid), 'is-valid': inputName.valid }" id="name" name="name" 
                        [(ngModel)]="project.Name" required />
              
                    <small id="passwordHelpBlock"  class="invalid-feedback"  [ngClass]="{'d-invalid':!inputName.valid}">
                      This filed is requred
                    </small>

                    </td>
  
                    <select class="custom-select " [(ngModel)]="project.CategoryID">
                      <option *ngFor="let category of categories " [ngValue]="category.CategoryID">
                        {{category.Name}}
                      </option>
                    </select>
                    <td class="ui-p-3">
                        <input type="checkbox" name="isActive" class="form-control" id="isActive" [(ngModel)]="project.IsActive" />
                    </td>
                  </tr>
                </ng-template>
              </p-table>
      </div>
      </div>
    </div>


 

</div>

<!-- ------------- [Loading Animation] -------------- -->
<ng-template #elseBlock>
  <app-animated-loading *ngIf="!isDataLodingFailed"></app-animated-loading>
  <div *ngIf="isDataLodingFailed" class="">
    <div class="alert alert-danger" role="alert">
      <strong>{{'Loading Data Filed'}}</strong>
    </div>
  </div>
</ng-template>

<!-- ------------- [Dialog - Edit] -------------- -->
<app-dialog-edit-project [display]="displayEditDialog" (display)="displayDialogResults($event)" [project]="projectToEdit"
  [categories]="categories"></app-dialog-edit-project>
<!-- ------------- [Dialog - Confirm Delete] -------------- -->

<p-dialog header="Confirm Delete" [(visible)]="displayConfirmDeleteDialog" [responsive]="true" showEffect="fade"
  [modal]="true" [width]="300">
  <div class="ui-dialog-buttonpane ui-helper-clearfix">
    <button type="button" pButton icon="fa fa-close" (click)="cancelDelete()" label="Cancel"></button>
    <button type="button" pButton icon="fa fa-check" (click)="delete()" label="Delete"></button>
  </div>
</p-dialog>